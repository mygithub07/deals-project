{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Routes,Route,useLocation}from\"react-router-dom\";import{createPortal}from\"react-dom\";import{Header}from\"./components/Header\";import{HeroSection}from\"./components/HeroSection\";import{FeaturedDeals}from\"./components/FeaturedDeals\";import{SmartShopping}from\"./components/SmartShopping\";import{Footer}from\"./components/Footer\";import{RenderComparePrices}from\"./RenderComparePrices\";import Sidebar from\"./components/Sidebar\";import StoreFilter from\"./components/StoreFilter\";// New Component\nimport{fetchCategories,fetchStores,fetchTypes}from\"./components/api\";// Import fetchStores function\nimport Cards from\"./components/Cards\";import TypeFilter from\"./components/TypeFilter\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export const AppRouter=()=>{const location=useLocation();const[categories,setCategories]=useState({});const[stores,setStores]=useState([]);// New State for Stores\nconst[types,setTypes]=useState([]);const[sidebarContainer,setSidebarContainer]=useState(null);const[storeFilterContainer,setStoreFilterContainer]=useState(null);// New state for StoreFilter\nconst[selectedCategory,setSelectedCategory]=useState({type:null,name:null});const[selectedStore,setSelectedStore]=useState(null);// Store selection state\nconst[selectedType,setSelectedType]=useState(null);useEffect(()=>{fetchCategories().then(data=>{if(typeof data===\"object\"&&data!==null){setCategories(data);}else{console.error(\"Invalid category format:\",data);setCategories({});}});fetchStores().then(storeData=>{if(Array.isArray(storeData)){setStores(storeData);}else{console.error(\"Invalid store format:\",storeData);setStores([]);}});fetchTypes().then(typeData=>{// Fetch Types\nif(Array.isArray(typeData)){setTypes(typeData);}else{console.error(\"Invalid type format:\",typeData);setTypes([]);}});},[]);useEffect(()=>{if(location.pathname===\"/deals\"){const container=document.querySelector(\".container\");if(container){// Sidebar Element\nlet sidebarDiv=document.getElementById(\"side-menu\");if(!sidebarDiv){sidebarDiv=document.createElement(\"div\");sidebarDiv.className=\"sidebar\";sidebarDiv.id=\"side-menu\";container.appendChild(sidebarDiv);}setSidebarContainer(sidebarDiv);// Store Filter Element (Separate from Sidebar)\n// let storeFilterDiv = document.getElementById(\"store-filter\");\n// if (!storeFilterDiv) {\n//     storeFilterDiv = document.createElement(\"div\");\n//     storeFilterDiv.className = \"store-filter\";\n//     storeFilterDiv.id = \"store-filter\";\n//     container.appendChild(storeFilterDiv);\n// }\n// setStoreFilterContainer(storeFilterDiv);\n}else{setSidebarContainer(null);// setStoreFilterContainer(null);\n}}},[location.pathname]);console.log(\"Categories in AppRouter:\",categories);console.log(\"Stores in AppRouter:\",stores);console.log(\"Selected Category:\",selectedCategory);console.log(\"Selected Store:\",selectedStore);return/*#__PURE__*/_jsxs(\"div\",{className:\"app-wrapper\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"content-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"page-container\",children:/*#__PURE__*/_jsx(\"main\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-container\",children:/*#__PURE__*/_jsx(HeroSection,{})}),/*#__PURE__*/_jsx(FeaturedDeals,{}),/*#__PURE__*/_jsx(SmartShopping,{})]})}),/*#__PURE__*/_jsx(Route,{path:\"/compare-prices\",element:/*#__PURE__*/_jsx(RenderComparePrices,{})}),/*#__PURE__*/_jsx(Route,{path:\"/deals\",element:/*#__PURE__*/_jsxs(_Fragment,{children:[sidebarContainer&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(Sidebar,{data:categories,setSelectedCategory:setSelectedCategory}),sidebarContainer),sidebarContainer&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(StoreFilter,{stores:stores,setSelectedStore:setSelectedStore}),sidebarContainer),sidebarContainer&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(TypeFilter,{types:types,setSelectedType:setSelectedType}),// FIXED PROP\nsidebarContainer),/*#__PURE__*/_jsx(Cards,{selectedCategory:selectedCategory,selectedStore:selectedStore,selectedType:selectedType})]})})]})})})}),/*#__PURE__*/_jsx(Footer,{})]});};","map":{"version":3,"names":["React","useEffect","useState","Routes","Route","useLocation","createPortal","Header","HeroSection","FeaturedDeals","SmartShopping","Footer","RenderComparePrices","Sidebar","StoreFilter","fetchCategories","fetchStores","fetchTypes","Cards","TypeFilter","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AppRouter","location","categories","setCategories","stores","setStores","types","setTypes","sidebarContainer","setSidebarContainer","storeFilterContainer","setStoreFilterContainer","selectedCategory","setSelectedCategory","type","name","selectedStore","setSelectedStore","selectedType","setSelectedType","then","data","console","error","storeData","Array","isArray","typeData","pathname","container","document","querySelector","sidebarDiv","getElementById","createElement","className","id","appendChild","log","children","path","element"],"sources":["/Users/amit/Desktop/amit/deals-project/frontend/src/AppRouter.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Routes, Route, useLocation } from \"react-router-dom\";\nimport { createPortal } from \"react-dom\";\nimport { Header } from \"./components/Header\";\nimport { HeroSection } from \"./components/HeroSection\";\nimport { FeaturedDeals } from \"./components/FeaturedDeals\";\nimport { SmartShopping } from \"./components/SmartShopping\";\nimport { Footer } from \"./components/Footer\";\nimport { RenderComparePrices } from \"./RenderComparePrices\";\nimport Sidebar from \"./components/Sidebar\";\nimport StoreFilter from \"./components/StoreFilter\"; // New Component\nimport { fetchCategories, fetchStores, fetchTypes} from \"./components/api\"; // Import fetchStores function\nimport Cards from \"./components/Cards\";\nimport TypeFilter from \"./components/TypeFilter\";\n\nexport const AppRouter = () => {\n    const location = useLocation();\n    const [categories, setCategories] = useState({});\n    const [stores, setStores] = useState([]); // New State for Stores\n    const [types, setTypes] = useState([]);\n    const [sidebarContainer, setSidebarContainer] = useState(null);\n    const [storeFilterContainer, setStoreFilterContainer] = useState(null); // New state for StoreFilter\n    const [selectedCategory, setSelectedCategory] = useState({ type: null, name: null });\n    const [selectedStore, setSelectedStore] = useState(null); // Store selection state\n    const [selectedType, setSelectedType] = useState(null);\n\n    useEffect(() => {\n        fetchCategories().then((data) => {\n            if (typeof data === \"object\" && data !== null) {\n                setCategories(data);\n            } else {\n                console.error(\"Invalid category format:\", data);\n                setCategories({});\n            }\n        });\n\n        fetchStores().then((storeData) => {\n            if (Array.isArray(storeData)) {\n                setStores(storeData);\n            } else {\n                console.error(\"Invalid store format:\", storeData);\n                setStores([]);\n            }\n        });\n        fetchTypes().then((typeData) => {  // Fetch Types\n            if (Array.isArray(typeData)) {\n                setTypes(typeData);\n            } else {\n                console.error(\"Invalid type format:\", typeData);\n                setTypes([]);\n            }\n        });\n\n    }, []);\n\n    \n\n    useEffect(() => {\n        if (location.pathname === \"/deals\") {\n            const container = document.querySelector(\".container\");\n            if (container) {\n                // Sidebar Element\n                let sidebarDiv = document.getElementById(\"side-menu\");\n                if (!sidebarDiv) {\n                    sidebarDiv = document.createElement(\"div\");\n                    sidebarDiv.className = \"sidebar\";\n                    sidebarDiv.id = \"side-menu\";\n                    container.appendChild(sidebarDiv);\n                }\n                setSidebarContainer(sidebarDiv);\n\n                // Store Filter Element (Separate from Sidebar)\n                // let storeFilterDiv = document.getElementById(\"store-filter\");\n                // if (!storeFilterDiv) {\n                //     storeFilterDiv = document.createElement(\"div\");\n                //     storeFilterDiv.className = \"store-filter\";\n                //     storeFilterDiv.id = \"store-filter\";\n                //     container.appendChild(storeFilterDiv);\n                // }\n                // setStoreFilterContainer(storeFilterDiv);\n            } else {\n                setSidebarContainer(null);\n               // setStoreFilterContainer(null);\n            }\n        }\n    }, [location.pathname]);\n\n    console.log(\"Categories in AppRouter:\", categories);\n    console.log(\"Stores in AppRouter:\", stores);\n    console.log(\"Selected Category:\", selectedCategory);\n    console.log(\"Selected Store:\", selectedStore);\n\n    return (\n        <div className=\"app-wrapper\">\n            <Header />\n            <div className=\"content-wrapper\">\n                <div className=\"page-container\">\n                    <main className=\"main-content\">\n                        <Routes>\n                            <Route\n                                path=\"/\"\n                                element={\n                                    <>\n                                        <div className=\"hero-container\">\n                                            <HeroSection />\n                                        </div>\n                                        <FeaturedDeals />\n                                        <SmartShopping />\n                                    </>\n                                }\n                            />\n                            <Route path=\"/compare-prices\" element={<RenderComparePrices />} />\n                            <Route\n                                path=\"/deals\"\n                                element={\n                                    <>\n                                        {sidebarContainer &&\n                                            createPortal(\n                                                <Sidebar data={categories} setSelectedCategory={setSelectedCategory} />,\n                                                sidebarContainer\n                                            )}\n                        \n                                        {sidebarContainer &&\n                                            createPortal(\n                                                <StoreFilter stores={stores} setSelectedStore={setSelectedStore} />,\n                                                sidebarContainer\n                                            )}\n\n                                        {sidebarContainer &&\n                                            createPortal(\n                                                <TypeFilter types={types} setSelectedType={setSelectedType} />, // FIXED PROP\n                                                sidebarContainer\n                                            )}\n                                        <Cards selectedCategory={selectedCategory} selectedStore={selectedStore} selectedType={selectedType}/>\n                                    </>\n                                }\n                            />\n                        </Routes>\n                    </main>\n                </div>\n            </div>\n            <Footer />\n        </div>\n    );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}