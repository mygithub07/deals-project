{"ast":null,"code":"var _jsxFileName = \"/Users/amit/Desktop/amit/deals-project/frontend/src/components/Cards.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { fetchDeals } from \"./api\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Cards = ({\n  selectedCategory,\n  selectedStore,\n  selectedType\n}) => {\n  _s();\n  const [deals, setDeals] = useState([]);\n  const [filteredDeals, setFilteredDeals] = useState([]);\n  const [visibleCount, setVisibleCount] = useState(9);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const getDeals = async () => {\n      try {\n        setLoading(true);\n        const response = await fetchDeals();\n        setDeals(response);\n        setLoading(false);\n      } catch (err) {\n        setError(\"Failed to fetch deals\");\n        setLoading(false);\n      }\n    };\n    getDeals();\n  }, []);\n  useEffect(() => {\n    if (selectedCategory || selectedStore) {\n      setFilteredDeals(deals.filter(deal => {\n        var _deal$main_categories, _deal$subcategories, _deal$store, _deal$type;\n        // If \"All Deals\" is selected, do not filter by category\n        const categoryMatch = !selectedCategory || selectedCategory.name === \"All Deals\" ? true : selectedCategory.type === \"category\" ? (_deal$main_categories = deal.main_categories) === null || _deal$main_categories === void 0 ? void 0 : _deal$main_categories.toLowerCase().includes(selectedCategory.name.toLowerCase()) : selectedCategory.type === \"subcategory\" ? (_deal$subcategories = deal.subcategories) === null || _deal$subcategories === void 0 ? void 0 : _deal$subcategories.toLowerCase().includes(selectedCategory.name.toLowerCase()) : true;\n\n        // If \"All Stores\" is selected, do not filter by store\n        const storeMatch = !selectedStore || selectedStore.name === \"All Stores\" ? true : ((_deal$store = deal.store) === null || _deal$store === void 0 ? void 0 : _deal$store.toLowerCase()) === selectedStore.name.toLowerCase();\n        const typeMatch = !selectedType || selectedType === \"All Types\" ? true : ((_deal$type = deal.type) === null || _deal$type === void 0 ? void 0 : _deal$type.toLowerCase()) === selectedType.toLowerCase();\n        return categoryMatch && storeMatch && typeMatch;\n      }));\n    } else {\n      setFilteredDeals(deals);\n    }\n  }, [selectedCategory, selectedStore, selectedType, deals]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-row\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading deals...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this) : filteredDeals.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [filteredDeals.slice(0, visibleCount).map((deal, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-sm-6 col-lg-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card shadow-sm position-relative overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overlay text-white d-flex flex-column justify-content-center align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"fw-bold\",\n                  children: deal.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 73,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: deal.smartlink,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"btn btn-light btn-lg\",\n                children: [\"View Deal on \", deal.store]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-container\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `data:image/jpeg;base64,${deal.image_data}`,\n                alt: deal.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 33\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this)), visibleCount < filteredDeals.length && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mt-3\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: () => setVisibleCount(prev => prev + 9),\n            children: \"Load More\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted\",\n        children: \"No deals found for the selected filters.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n_s(Cards, \"OsHfqtYDQPUzxgwkNYHaZbAolrA=\");\n_c = Cards;\nexport default Cards;\nvar _c;\n$RefreshReg$(_c, \"Cards\");","map":{"version":3,"names":["React","useState","useEffect","fetchDeals","jsxDEV","_jsxDEV","Fragment","_Fragment","Cards","selectedCategory","selectedStore","selectedType","_s","deals","setDeals","filteredDeals","setFilteredDeals","visibleCount","setVisibleCount","loading","setLoading","error","setError","getDeals","response","err","filter","deal","_deal$main_categories","_deal$subcategories","_deal$store","_deal$type","categoryMatch","name","type","main_categories","toLowerCase","includes","subcategories","storeMatch","store","typeMatch","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","slice","map","index","title","href","smartlink","target","rel","src","image_data","alt","onClick","prev","_c","$RefreshReg$"],"sources":["/Users/amit/Desktop/amit/deals-project/frontend/src/components/Cards.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { fetchDeals } from \"./api\";\n\nconst Cards = ({ selectedCategory, selectedStore, selectedType }) => {\n    const [deals, setDeals] = useState([]);\n    const [filteredDeals, setFilteredDeals] = useState([]);\n    const [visibleCount, setVisibleCount] = useState(9);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const getDeals = async () => {\n            try {\n                setLoading(true);\n                const response = await fetchDeals();\n                setDeals(response);\n                setLoading(false);\n            } catch (err) {\n                setError(\"Failed to fetch deals\");\n                setLoading(false);\n            }\n        };\n        getDeals();\n    }, []);\n\n    useEffect(() => {\n        if (selectedCategory || selectedStore) {\n            setFilteredDeals(\n                deals.filter((deal) => {\n                    // If \"All Deals\" is selected, do not filter by category\n                    const categoryMatch =\n                        !selectedCategory || selectedCategory.name === \"All Deals\"\n                            ? true\n                            : selectedCategory.type === \"category\"\n                                ? deal.main_categories?.toLowerCase().includes(selectedCategory.name.toLowerCase())\n                                : selectedCategory.type === \"subcategory\"\n                                    ? deal.subcategories?.toLowerCase().includes(selectedCategory.name.toLowerCase())\n                                    : true;\n\n                    // If \"All Stores\" is selected, do not filter by store\n                    const storeMatch =\n                        !selectedStore || selectedStore.name === \"All Stores\"\n                            ? true\n                            : deal.store?.toLowerCase() === selectedStore.name.toLowerCase();\n                    const typeMatch =\n                        !selectedType || selectedType === \"All Types\"\n                            ? true\n                            : deal.type?.toLowerCase() === selectedType.toLowerCase();\n                    return categoryMatch && storeMatch && typeMatch;\n                })\n            );\n        } else {\n            setFilteredDeals(deals);\n        }\n    }, [selectedCategory, selectedStore, selectedType,deals]);\n\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"card-row\">\n                {loading ? (\n                    <p>Loading deals...</p>\n                ) : error ? (\n                    <p className=\"text-danger\">{error}</p>\n                ) : filteredDeals.length > 0 ? (\n                    <>\n                        {filteredDeals.slice(0, visibleCount).map((deal, index) => (\n                            <div key={index} className=\"col-12 col-sm-6 col-lg-4\">\n                                <div className=\"card shadow-sm position-relative overflow-hidden\">\n                                    <div className=\"overlay text-white d-flex flex-column justify-content-center align-items-center\">\n                                        <div>\n                                            <p className=\"fw-bold\">{deal.title}</p>\n                                        \n                                        </div>\n                                        <a href={deal.smartlink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn btn-light btn-lg\">\n                                            View Deal on {deal.store}\n                                        </a>\n                                    </div>\n                                    <div className=\"image-container\">\n                                        <img src={`data:image/jpeg;base64,${deal.image_data}`} alt={deal.title} />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                        {visibleCount < filteredDeals.length && (\n                            <div className=\"text-center mt-3\">\n                                <button\n                                    className=\"btn btn-primary\"\n                                    onClick={() => setVisibleCount((prev) => prev + 9)}\n                                >\n                                    Load More\n                                </button>\n                            </div>\n                        )}\n                    </>\n                ) : (\n                    <p className=\"text-muted\">No deals found for the selected filters.</p>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Cards;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}