{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{fetchDeals}from\"./api\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Cards=_ref=>{let{selectedCategory,selectedStore,selectedType}=_ref;const[deals,setDeals]=useState([]);const[filteredDeals,setFilteredDeals]=useState([]);const[visibleCount,setVisibleCount]=useState(9);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const getDeals=async()=>{try{setLoading(true);const response=await fetchDeals();setDeals(response);setLoading(false);}catch(err){setError(\"Failed to fetch deals\");setLoading(false);}};getDeals();},[]);useEffect(()=>{if(selectedCategory||selectedStore){setFilteredDeals(deals.filter(deal=>{var _deal$main_categories,_deal$subcategories,_deal$store,_deal$type;// If \"All Deals\" is selected, do not filter by category\nconst categoryMatch=!selectedCategory||selectedCategory.name===\"All Deals\"?true:selectedCategory.type===\"category\"?(_deal$main_categories=deal.main_categories)===null||_deal$main_categories===void 0?void 0:_deal$main_categories.toLowerCase().includes(selectedCategory.name.toLowerCase()):selectedCategory.type===\"subcategory\"?(_deal$subcategories=deal.subcategories)===null||_deal$subcategories===void 0?void 0:_deal$subcategories.toLowerCase().includes(selectedCategory.name.toLowerCase()):true;// If \"All Stores\" is selected, do not filter by store\nconst storeMatch=!selectedStore||selectedStore.name===\"All Stores\"?true:((_deal$store=deal.store)===null||_deal$store===void 0?void 0:_deal$store.toLowerCase())===selectedStore.name.toLowerCase();const typeMatch=!selectedType||selectedType===\"All Types\"?true:((_deal$type=deal.type)===null||_deal$type===void 0?void 0:_deal$type.toLowerCase())===selectedType.toLowerCase();return categoryMatch&&storeMatch&&typeMatch;}));}else{setFilteredDeals(deals);}},[selectedCategory,selectedStore,selectedType,deals]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-row\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading deals...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}):filteredDeals.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[filteredDeals.slice(0,visibleCount).map((deal,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-sm-6 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow-sm position-relative overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overlay text-white d-flex flex-column justify-content-center align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"fw-bold\",children:deal.title})}),/*#__PURE__*/_jsxs(\"a\",{href:deal.smartlink,target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-light btn-lg\",children:[\"View Deal on \",deal.store]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:`data:image/jpeg;base64,${deal.image_data}`,alt:deal.title})})]})},index)),visibleCount<filteredDeals.length&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setVisibleCount(prev=>prev+9),children:\"Load More\"})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"No deals found for the selected filters.\"})})});};export default Cards;","map":{"version":3,"names":["React","useState","useEffect","fetchDeals","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cards","_ref","selectedCategory","selectedStore","selectedType","deals","setDeals","filteredDeals","setFilteredDeals","visibleCount","setVisibleCount","loading","setLoading","error","setError","getDeals","response","err","filter","deal","_deal$main_categories","_deal$subcategories","_deal$store","_deal$type","categoryMatch","name","type","main_categories","toLowerCase","includes","subcategories","storeMatch","store","typeMatch","className","children","length","slice","map","index","title","href","smartlink","target","rel","src","image_data","alt","onClick","prev"],"sources":["/Users/amit/Desktop/amit/deals-project/frontend/src/components/Cards.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { fetchDeals } from \"./api\";\n\nconst Cards = ({ selectedCategory, selectedStore, selectedType }) => {\n    const [deals, setDeals] = useState([]);\n    const [filteredDeals, setFilteredDeals] = useState([]);\n    const [visibleCount, setVisibleCount] = useState(9);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const getDeals = async () => {\n            try {\n                setLoading(true);\n                const response = await fetchDeals();\n                setDeals(response);\n                setLoading(false);\n            } catch (err) {\n                setError(\"Failed to fetch deals\");\n                setLoading(false);\n            }\n        };\n        getDeals();\n    }, []);\n\n    useEffect(() => {\n        if (selectedCategory || selectedStore) {\n            setFilteredDeals(\n                deals.filter((deal) => {\n                    // If \"All Deals\" is selected, do not filter by category\n                    const categoryMatch =\n                        !selectedCategory || selectedCategory.name === \"All Deals\"\n                            ? true\n                            : selectedCategory.type === \"category\"\n                                ? deal.main_categories?.toLowerCase().includes(selectedCategory.name.toLowerCase())\n                                : selectedCategory.type === \"subcategory\"\n                                    ? deal.subcategories?.toLowerCase().includes(selectedCategory.name.toLowerCase())\n                                    : true;\n\n                    // If \"All Stores\" is selected, do not filter by store\n                    const storeMatch =\n                        !selectedStore || selectedStore.name === \"All Stores\"\n                            ? true\n                            : deal.store?.toLowerCase() === selectedStore.name.toLowerCase();\n                    const typeMatch =\n                        !selectedType || selectedType === \"All Types\"\n                            ? true\n                            : deal.type?.toLowerCase() === selectedType.toLowerCase();\n                    return categoryMatch && storeMatch && typeMatch;\n                })\n            );\n        } else {\n            setFilteredDeals(deals);\n        }\n    }, [selectedCategory, selectedStore, selectedType,deals]);\n\n\n\n    return (\n        <div className=\"container\">\n            <div className=\"card-row\">\n                {loading ? (\n                    <p>Loading deals...</p>\n                ) : error ? (\n                    <p className=\"text-danger\">{error}</p>\n                ) : filteredDeals.length > 0 ? (\n                    <>\n                        {filteredDeals.slice(0, visibleCount).map((deal, index) => (\n                            <div key={index} className=\"col-12 col-sm-6 col-lg-4\">\n                                <div className=\"card shadow-sm position-relative overflow-hidden\">\n                                    <div className=\"overlay text-white d-flex flex-column justify-content-center align-items-center\">\n                                        <div>\n                                            <p className=\"fw-bold\">{deal.title}</p>\n                                        \n                                        </div>\n                                        <a href={deal.smartlink} target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn btn-light btn-lg\">\n                                            View Deal on {deal.store}\n                                        </a>\n                                    </div>\n                                    <div className=\"image-container\">\n                                        <img src={`data:image/jpeg;base64,${deal.image_data}`} alt={deal.title} />\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                        {visibleCount < filteredDeals.length && (\n                            <div className=\"text-center mt-3\">\n                                <button\n                                    className=\"btn btn-primary\"\n                                    onClick={() => setVisibleCount((prev) => prev + 9)}\n                                >\n                                    Load More\n                                </button>\n                            </div>\n                        )}\n                    </>\n                ) : (\n                    <p className=\"text-muted\">No deals found for the selected filters.</p>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default Cards;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}